<div class="NoteDescWrap"><h1>0419 [Ch1]作業系統簡介與常見系統類型(二)</h1><div class="NoteDescWrap_desc"></div><div class="NoteDescWrap_time"></div><div class="NoteDescWrap_tags"><span class="tag">PROG.OS</span></div><span>更新時間: 2022/9/14 下午 10:27</span> | <span>新增時間: 2022/9/14 下午 10:27</span></div><h2 id="電腦系統概論-computer-system-structure">電腦系統概論 computer system structure</h2>
<h3 id="組成電腦的五大單元">組成電腦的五大單元</h3>
<p><img src="/assets/images/2022-05-02-22-40-17.png" alt="" /></p>
<blockquote>
<p>圖源: <a href="https://linux.vbird.org/linux_basic/centos7/0105computers.php#ps4">第零章、計算機概論 - 鳥哥</a></p>
</blockquote>
<p><img src="/assets/images/2022-05-02-22-46-40.png" alt="" /></p>
<blockquote>
<p>圖源: <a href="https://zh-yue.wikipedia.org/wiki/%E9%A6%AE%E7%B4%90%E6%9B%BC%E6%9E%B6%E6%A7%8B">馮紐曼架構 Von Neumann architecture</a>/<a href="https://en.wikibooks.org/wiki/IB/Group_4/Computer_Science/Computer_Organisation">Computer Organisation</a></p>
</blockquote>
<ol>
<li>輸入單元 input device</li>
<li>輸出單元 output device</li>
<li>CPU 內部的控制單元 control unit</li>
<li>CPU 內部的算數邏輯單元 arithmetic/logic unit (ALU)</li>
<li>主記憶體 memory unit</li>
</ol>
<h3 id="電腦系統粗分為四元件">電腦系統粗分為四元件</h3>
<p><img src="/assets/images/2022-05-02-23-43-42.png" alt="" /></p>
<ol>
<li><p>硬體 hardware</p>
<p>例如: cpu、disk、memory...</p>
</li>
<li><p>作業系統 operating system</p>
</li>
<li><p>應用程式與系統程式 application programs and sys programs</p>
</li>
<li><p>使用者 users</p>
<p>例如: 人、其他機器、其他系統...</p>
</li>
</ol>
<h2 id="作業系統概述-os-structure">作業系統概述 OS Structure</h2>
<h3 id="os-的目的">OS 的目的</h3>
<ol>
<li><p>user 與硬體之介面(方便使用者易於操作電腦)</p>
</li>
<li><p>提供一個讓 app 易於執行之環境，即很多底層硬體控制不需 app 來直接運作 =&gt; 委託 os 來執行</p>
</li>
<li><p>資源有限 =&gt; 作為資源調派者(resource allocator) (eg cpu, memory, I/O Device etc)</p>
<p>=&gt; 希望有效運用資源，甚至公平使用。</p>
</li>
<li><p>監督應用程式執行之角色，防止他們有意或無意之操作</p>
</li>
</ol>
<h3 id="電腦系統架構">電腦系統架構</h3>
<ol>
<li><p>多處理器系統 Multiprocessor System / Parallel System / Tightly Coupled System- 又叫 Multiprocessing 或 paraller 或 tightly-coupled system。</p>
<ul>
<li>主要 features 如下:
<ul>
<li>一部機器(或主機板)內置多顆處理器，均共享此一機器的 memory、bus、I/O devices, power-supply etc。</li>
<li>通常所有 CPUs 均受同一個 clock 之時脈控制。</li>
<li>通常由同一個 OS 管控所有 CPU。</li>
<li>這些處理器之間的溝通大都採共享記憶體方式。 [CH6]</li>
</ul>
</li>
<li>優點
<ul>
<li>增加產能(Increased Throughput)</li>
<li>增加可靠性 (Increased Reliability)</li>
<li>規模經濟 (Economy of scale)</li>
</ul>
</li>
<li>分述如下:
<ul>
<li>產能增加: 所以支持 parallel computing，同一時內可有多個工作在不同 CPUs 上平行執行。
<ul>
<li>N 顆 CPUs 之產能絕對小於: 1 顆 CPU 產能* N 倍。</li>
<li>理由: 因為 (1) Resource Condition(資源競爭)。 (2) 處理器之間的溝通導致不見得工作可以平行執行
所以效能會被抵減。</li>
</ul>
</li>
<li>提升可靠度: 萬一某 CPU 壞了，其他 CPU 仍可執行工作。
<ul>
<li>所以統不至於因而停頓。</li>
<li>名詞:
<ul>
<li>graceful degradation 漸進式毀滅
系統不會因某些元件(e.g.硬體或軟體)的故障而停頓，仍保有持續運作的能力。</li>
<li>Fault Tolerant system (容錯系統)
具有 graceful degradation 能力之系統。</li>
</ul>
</li>
</ul>
</li>
<li>運算能力之規模擴充比較具有經濟效益
<ul>
<li>這些多顆 CPUs 是共享此機器之記憶體、匯流排等其他資源，所以會比較省錢。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li><p>最常見為 SMP(Symmetric Multi-Processing)</p>
<p>對稱式多處理器記憶體資源是共享的又稱 UMA(Uniform Memory Access)，所以會有資源競爭的問題。可用 CPU 排程和同步工具來解決遇到的問題(CH5、CH6)。</p>
<p>雙核(dual-core)設計的處理器將多個 CPU 放置同一晶片(chips)上，會比個放在不同晶片上更有效率且更省電(省電對筆電和手機來說很重要)。</p>
<p>快取級數越小代表體積越小、速度越快。</p>
<p>這種共用資源的 CPU 架構讓 OS 設計及程式設計變得很重要(CH4 執行緒與並行)。</p>
<p><img src="/assets/images/2022-05-03-22-41-34.png" alt="" /></p>
<blockquote>
<p>圖源: <a href="https://www.youtube.com/watch?v=IU9cB5g4eZU&amp;ab_channel=ITSimplifiedinHINDI">Cache Memory | L1, L2 and L3 Caches in Computers | L1 L2 L3 Cache Explained in Hindi</a></p>
</blockquote>
<p>當 CPU 變多，處理器和記憶體間的匯流排將會成為資料存取的瓶頸，會嚴重地影響到系統效能。[註 1]</p>
<p>為了解決多 CPU 的資源競爭問題，NUMA (Non-Uniform Memory Access) 的設計簡化了匯流排的複雜程度，NUMA 將處理器切成不同節點，每個處理器都有各自的連結，當要用到別的節點的記憶體時速度會變慢，但只用到自己的記憶體時不只速度快、也不會有資源競爭的問題(因為自己用自己的，去用別人的也只會有一條路)。</p>
<p><img src="/assets/images/2022-05-03-23-52-25.png" alt="" /></p>
<blockquote>
<p>圖源: <a href="https://www.researchgate.net/figure/A-NUMA-architecture-with-4-nodes_fig2_273393420">A NUMA architecture with 4 nodes - uploaded by Li Wang</a></p>
</blockquote>
</li>
<li><p>ASMP(Asymmetric MultiProcessors) 非對稱式多處理器:通常採主從式架構。比 SMP 效能還差，主 CPU 易有效能瓶頸，且可靠度也差(主 CPU 壞了就全不能用)。</p>
</li>
<li><p>叢集式系統 clustered system</p>
<ol>
<li>也是一種多處理器系統(Multiprocessor System)</li>
</ol>
</li>
</ol>
</li>
<li><p>分散式系統 Distributed System / Loosely Coupled system</p>
<p>多部機器彼此以網路相互串聯。機器間硬體資源不共享、各 CPU 時脈(clock)控制不一定相同、各 CPU 上的 OS 也不一定相同、處理器之間的溝通大都採 Message Passing 方式 (CH6)。</p>
<p>增加吞吐量(throughput)和可靠性(reliability)、減少資源共享、可滿足遠端通訊的需求。</p>
<p>可分成主從式架構與 P2P 架構。(就像 ASMP 和 NUMA 概念的差別，不是主從就是平權欸...)</p>
</li>
</ol>
<h3 id="作業系統執行">作業系統執行</h3>
<ol>
<li><p>多元程式設計系統 Multiprogramming</p>
<p>允許多個程序 (processes/jobs) 在記憶體裡同時執行。</p>
<ul>
<li><p>主要目的: 提高 CPU 利用度 (utilization)。</p>
</li>
<li><p>Mulitiprogramming degree 代表系統內執行的程序 (processes) 數目。</p>
<p>一般而言，若值愈高，CPU 利用度 (utilzation) 愈高。</p>
</li>
<li><p>多個工作 (processes/jobs) 同時執行的方法有兩種:</p>
<ul>
<li><p>並行 Concurrent execution
通常發生在單核(一顆 CPU 時)</p>
</li>
<li><p>平行 Parallel execution
多顆 CPUs 或 MultiCores</p>
</li>
</ul>
</li>
</ul>
<ol>
<li>分時系統 Time-Sharing / Multitasking
又叫 multitasking，是一種多元程式的邏輯擴充 (logical extension)。
<ul>
<li>強調
<ul>
<li>回應時間要短。</li>
<li>對每個使用者工作要公平對待。</li>
<li>讓每個使用者覺得有自己專屬的電腦的感覺。</li>
</ul>
</li>
<li>技術
<ul>
<li>CPU 排班採用 RR 排班。[CH4]</li>
<li>有 Swapping 技術，即虛擬記憶體技術。[CH8]</li>
<li>有 SPOOLing 技術，讓每個使用者有自己的 I/O 設備的感覺，同時也有 Buffering 技術(使用記憶體)一併使用。</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li><p>Dual-Mode and Multimode Operation</p>
</li>
<li><p>Timer</p>
</li>
<li><p>批次系統 Batch System</p>
</li>
</ol>
<hr />
<ol start="6">
<li><p>即時系統 Real-Time System</p>
<ol>
<li>Hard</li>
<li>Soft</li>
</ol>
</li>
<li><p>手持系統 handheld system</p>
</li>
</ol>
<h2 id="參考資料">參考資料</h2>
<ul>
<li>註一 <a href="https://www.cc.ntu.edu.tw/chinese/epaper/0015/20101220_1508.htm">多核心計算環境—NUMA 與 CPUSET 簡介 by 周秉誼</a></li>
</ul>
<h4 id="名詞解釋">名詞解釋</h4>
<ul>
<li><p>CPU</p>
<p>執行指令(instructions)的硬體。</p>
</li>
<li><p>處理器 Processor</p>
<p>包含一或多個 CPU 的物理晶片(chip)。</p>
</li>
<li><p>核心 Core</p>
<p>CPU 的基本數量單位。</p>
</li>
<li><p>多核心 Multicore</p>
<p>同 CPU 上包含多個運算核心。</p>
</li>
<li><p>Multiprocessor</p>
<p>包含多個處理器。</p>
</li>
</ul>
