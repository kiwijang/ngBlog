<div class="NoteDescWrap"><h1>0919 [Angular] Subject</h1><div class="NoteDescWrap_desc"></div><div class="NoteDescWrap_time"></div><div class="NoteDescWrap_tags"><span class="tag">PROG.Angular</span></div><span>更新時間: 2022/9/20 上午 01:02</span> | <span>新增時間: 2022/9/20 上午 01:02</span></div><!-- 
date: 2020-05-16 09:34:52
 -->
<h2>初探 Angular Subject</h2>
<p>從 Angular Subject 看到 RxJS Subject</p>
<!-- more -->
<h3>Angular Subject</h3>
<blockquote>
<p>Every Subject is an Observable. Every Subject is an Observer.
subject 是 observable 也是 observer。</p>
</blockquote>
<p>EventEmitter 是繼承 Subject 的 Class，之前有用到 EventEmitter 的地方在元件的溝通。
<img src="https://i.imgur.com/6bjsuRk.png" alt="" /></p>
<h2>Angular 元件的溝通</h2>
<p>資料來源: https://stackoverflow.com/questions/37587732/how-to-call-another-components-function-in-angular2
元件溝通有四種，父傳子、子傳父、相鄰子元件、不相關的元件
<img src="https://i.imgur.com/8RYwc55.png" alt="" /></p>
<h2>子傳父</h2>
<p>用到 EventEmitter。
<img src="https://i.imgur.com/ZHZMY5h.png" alt="" /></p>
<h2>元件傳元件</h2>
<p>用到 BehaviorSubject。
<img src="https://i.imgur.com/XJGFBXh.png" alt="" /></p>
<hr />
<h1>RxJS Subject</h1>
<h2>什麼是 Subject ?</h2>
<p>Subject 是 Observable 也是 Observer 。</p>
<h3>Observable(可觀察的物件)</h3>
<p>代表一組未來即將產生的事件資料(被觀察的物件)</p>
<h3>Observer (觀察者物件)</h3>
<p>代表一個用來接收「<strong>觀察結果</strong>」的物件(收到的就是<strong>事件資料</strong>)
觀察者物件就是一個物件包含 <strong>3</strong> 個含有<strong>回呼函式</strong>的屬性(<strong>next, error, complete</strong>)</p>
<h3>Subscription (訂閱物件)</h3>
<p>代表正在執行 Observable/Observer 的執行個體(可用來<strong>取消訂閱</strong>)</p>
<h3>Subject (主體物件)</h3>
<p>如同 EventEmitter 一樣，主要用來<strong>廣播</strong>收到的事件資料給多位 Observer (觀察者)</p>
<h2>什麼是 Subject ?</h2>
<p>Subject 是 Observable 也是 Observer 。</p>
<blockquote>
<p>observable.subscribe(observer);</p>
</blockquote>
<p><img src="https://i.imgur.com/RJYMCHW.png" alt="" /></p>
<p>RxJS 裡的 Subject 有 4 種類型，Subject、BehaviorSubject、ReplaySubject 、 AsyncSubject</p>
<p>參考來源:
https://rxjs.dev/guide/subject
http://reactivex.io/documentation/subject.html
https://medium.com/angular-in-depth/mastering-rxjs-operators-and-functions-that-can-bite-you-when-you-dont-expect-cb2047cf5d4c</p>
<h2>Subject、BehaviorSubject</h2>
<p>回傳訂閱前後到complete()前的範圍
<img src="https://i.imgur.com/H0Jty8h.png" alt="" />
回傳訂閱後到complete()前的範圍
<img src="https://i.imgur.com/is3H2L9.png" alt="" />
<a href="https://codepen.io/kiwijang/pen/abvGGwy?editors=0012">Subject、BehaviorSubject Demo</a></p>
<h2>ReplaySubject、 AsyncSubject</h2>
<p><img src="https://i.imgur.com/HNrqWS5.png" alt="" />
第一次訂閱:回傳訂閱前後到complete()前的範圍
之後訂閱:回傳訂閱前所有值(無視complete())</p>
<p>回傳complete()前一個值
<img src="https://i.imgur.com/Vp7NzCY.png" alt="" />
<img src="https://i.imgur.com/zeniMhc.png" alt="" />
<a href="https://codepen.io/kiwijang/pen/vYNjrBw">ReplaySubject、 AsyncSubject Demo</a></p>
<h3>小結</h3>
<p><img src="https://i.imgur.com/WHqXqic.png" alt="" /></p>
<ul>
<li>observable 被 subscribe 以後會有一個 observer 物件</li>
<li>observer 這個物件具有三個方法，分別是 next, error, complete</li>
<li>subscribe 會 return subscription(訂閱物件)</li>
</ul>
<hr />
<h3>簡寫 observer</h3>
<p><img src="https://i.imgur.com/DDj8Wrd.png" alt="" /></p>
<hr />
<p>參考資料:</p>
<ul>
<li><a href="https://rxjs.dev/">rxjs 官網</a></li>
<li><a href="https://www.youtube.com/watch?v=BA1vSZwzkK8&amp;t=">RxJS 6 新手入門 - 保哥 youtube</a></li>
<li><a href="https://reactive.how/">reactive.how</a></li>
<li><a href="https://rxmarbles.com/">RxJS Marbles: Built on RxJS v5.0.3</a></li>
<li><a href="https://www.youtube.com/watch?v=9udVLO947kk&amp;t=1224s">[S05E04]RxJS 基本介紹 - Subject</a></li>
<li><a href="https://stackoverflow.com/questions/43348463/what-is-the-difference-between-subject-and-behaviorsubject">What is the difference between Subject and BehaviorSubject?</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10188677">30 天精通 RxJS(23): Subject, BehaviorSubject, ReplaySubject, AsyncSubject</a></li>
<li><a href="https://github.com/kekeqy/ebook/blob/master/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BARxJS.pdf">深入浅出RxJS.pdf</a></li>
</ul>
