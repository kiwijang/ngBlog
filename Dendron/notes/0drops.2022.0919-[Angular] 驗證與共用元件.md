---
id: 7vo9q7rwhx3xyyg8auxb22s
title: '0919-[Angular] é©—è­‰èˆ‡å…±ç”¨å…ƒä»¶'
desc: ''
updated: 1663607028791
created: 1663605967730
tags:
  - PROG.Angular
status: w
---

<!-- title: tag0418-2021-è¡¨å–®é©—è­‰å¿ƒå¾—è¨˜éŒ„
date: 2021-04-18 18:24:14
categories: å­¸ç¿’æ—¥è¨˜ -->

é—œæ–¼å…±ç”¨è¡¨å–®é é¢ã€è¡¨å–®é©—è­‰çš„ ui çš„ä¸€äº›æƒ³æ³•...

<!-- more -->

## å…±ç”¨å…ƒä»¶

é€šå¸¸æ–°å¢å’Œç·¨è¼¯çš„é é¢æœƒéœ€è¦å…±ç”¨

### æ³• 1: è’é›†è³‡æ–™ç”¨çš„è¡¨å–®(åŒ…å«æ‰“ api åŠŸèƒ½)

##### ğŸ“Œ æ–°å¢æ™‚

1. è¦çµ¦ api ç”¨çš„è³‡æ–™æœƒè¦åœ¨å…±ç”¨å…ƒä»¶è£¡è’é›†èµ·ä¾†ï¼Œæ‰“ api

##### ğŸ“Œ ç·¨è¼¯æ™‚

1. è¦å…ˆåœ¨ç·¨è¼¯é æ‰“ api æ‹¿åˆ°è³‡æ–™ input åˆ°å…±ç”¨å…ƒä»¶
2. çµ¦ api ç”¨çš„è³‡æ–™æœƒè¦åœ¨å…±ç”¨å…ƒä»¶è£¡è’é›†èµ·ä¾†ï¼Œæ‰“ api
   (ç·¨è¼¯æ¯”æ–°å¢å¤šä¸€æ­¥é©Ÿ)

æ–°å¢é é¢å’Œç·¨è¼¯é é¢çš„é€å‡ºæŒ‰éˆ•éƒ½æœƒå¯«åœ¨å…±ç”¨å…ƒä»¶è£¡ï¼Œ
é€™æ¨£éœ€è¦å¤š input ä¸€å€‹åƒæ•¸ä¾†çœ‹ç¾åœ¨æ˜¯åœ¨ç·¨è¼¯ç‹€æ…‹é‚„æ˜¯æ–°å¢ç‹€æ…‹ï¼Œ
ç„¶å¾Œæ‰“ api æœƒè·Ÿè‘—æŒ‰éˆ•èµ°ï¼Œæ‰€ä»¥æ‰“æ–°å¢å’Œä¿®æ”¹çš„ api çš„å‹•ä½œæœƒå¯«åœ¨å…±ç”¨å…ƒä»¶è£¡...

æ‰€ä»¥å…±ç”¨å…ƒä»¶é™¤äº†æ¬„ä½é©—è­‰é‚è¼¯æœƒå¯«è£¡é¢ï¼Œé‚„è¦ input ç‹€æ…‹é€²å»åˆ¤æ–·ç¾åœ¨æ˜¯è¦æ–°å¢é‚„ç·¨è¼¯ï¼Œé‚„è¦æ ¹æ“šç‹€æ…‹æ‰“ä¸åŒçš„ api
é‚£é€™æ¨£æ‹†æˆæ–°å¢ç·¨è¼¯ component å°±åªæ˜¯ç‚ºäº† routing æ¯”è¼ƒæ–¹ä¾¿äº†

### æ³• 2: ReactiveForm åŒæ­¥é›™å‘ç¶å®š

å¦‚æœæˆ‘æ˜¯ç”¨ ReactiveForm åšå…±ç”¨å…ƒä»¶çš„è©±å°±å¯ä»¥æŠŠæŒ‰éˆ•æ”¾åˆ°å„è‡ªæ–°å¢å’Œç·¨è¼¯çš„ componentã€ä¹Ÿå¯ä»¥å„è‡ªæ³¨å…¥ service æ‰“ api
é€™æ¨£å…±ç”¨å…ƒä»¶çš„åŠŸèƒ½å°±å–®ç´”å¾ˆå¤š: æ¬„ä½é©—è­‰ã€è’é›†è³‡æ–™ã€è§’è‰²åˆ¤æ–·ã€æ§åˆ¶æ¬„ä½ disable
ä¸ç”¨å¹«ç•«é¢çš„æŒ‰éˆ•åšç‹€æ…‹åˆ¤æ–·æ˜¯å¦é¡¯ç¤º
ç„¶å¾Œæ‰“ API å‰çš„è³‡æ–™çš„æª¢æŸ¥(è½‰æˆå­—ä¸²ã€æ˜¯å¦è¦åƒä½¿ç”¨è€…è¼¸å…¥çš„è³‡æ–™é‚„æ˜¯å¯«æ­»)å°±æ˜¯åœ¨å„è‡ªçš„ component è£¡åˆ¤æ–·ã€æ³¨å…¥ api çš„ service
**ç›¸å°æ³• 1 ï¼Œæ³• 2 å¯ä»¥è®“å…±ç”¨å…ƒä»¶æ›´å°ˆæ³¨åœ¨é©—è­‰é‚è¼¯å’Œè³‡æ–™çš„é‚è¼¯(å°±ä¸ç”¨å»åœ¨æ„ input å’Œæ–°å¢ç·¨è¼¯ç‹€æ…‹çš„ç®¡ç†)**
æ‰€ä»¥æˆ‘å¾é ­åˆ°å°¾åªç”¨åœ¨æ„è¼¸å…¥çš„è³‡æ–™ï¼Œå®Œå…¨ä¸ç”¨å»ç®¡ä»€éº¼æ™‚å€™è¦ input outputã€ input output çš„å€¼è®ŠåŒ–å¾Œä»€éº¼æ™‚å€™è¢«ä»€éº¼äº‹ä»¶è§¸ç™¼å»æ”¹è®Šå€¼
æˆ‘åªè¦è¼¸å…¥è³‡æ–™ï¼Œè³‡æ–™å°±åœ¨å…±ç”¨å…ƒä»¶è£¡ç¶“éé©—è­‰ï¼Œä¸¦æ ¹æ“šå‚³å…¥çš„è³‡æ–™åšä»‹é¢çš„è®ŠåŒ–
å…¶ä»–æ‰“ api çš„å‹•ä½œä¹Ÿæ‹†å‡ºå»åœ¨å…±ç”¨å…ƒä»¶ä»¥å¤–çš„åœ°æ–¹åšï¼Œè®“å…±ç”¨å…ƒä»¶çœŸçš„å°±åªç”¨åš ui èˆ‡è³‡æ–™é©—è­‰çš„æ§åˆ¶å°±å¥½

æ‰€ä»¥æˆ‘æ˜¯æ¯”è¼ƒå–œæ­¡ç”¨ ReactiveForm ä¾†åšå…±ç”¨å…ƒä»¶ xD

#### æ³• 2 demo

[âš¡stackblitz ReactiveForm å…±ç”¨å…ƒä»¶](https://stackblitz.com/edit/angular-ivy-qaqscf?file=src/app/app.component.ts)

> æ­¤ demo åƒè€ƒè‡ª [Building Reusable Forms in Angular - Cory Rylan](https://coryrylan.com/blog/building-reusable-forms-in-angular)

#### åƒè€ƒè³‡æ–™

[[åŠŸèƒ½ä»‹ç´¹-10] Reactive Forms (Model-Driven Forms)](https://ithelp.ithome.com.tw/articles/10195280)

---

## æ¬„ä½é©—è­‰

[Angular Forms: Useful Tips - Armen Vardanyan](https://indepth.dev/posts/1224/angular-forms-useful-tips)

> Forms are not type-safe

- å¯ä»¥ä½¿ç”¨ Pipes åš ui é¡¯ç¤ºè½‰æ›çš„è™•ç†
- å¯ä»¥ä½¿ç”¨ Directives åšè¡¨å–®çš„é©—è­‰è™•ç†

### æ¬„ä½é©—è­‰çš„æ–¹å¼

- åªèƒ½è¼¸å…¥...: åªèƒ½è¼¸å…¥ä¸­è‹±ã€åªèƒ½è¼¸å…¥è‹±æ–‡ã€åªèƒ½è¼¸å…¥æ•¸å­—ã€åªèƒ½è¼¸å…¥ç‰¹å®šå¹¾å€‹å­—
  => ç›´æ¥è®“ä½¿ç”¨è€…ä¸èƒ½æ•²é™¤äº†è¦å®šä»¥å¤–çš„å­—å°±ä¸ç”¨åšéŒ¯èª¤æç¤ºäº†!(ä½¿ç”¨è€…åœ¨è¼¸å…¥æ™‚å°‡ä¸ç¬¦åˆè¦å®šçš„éƒ½ç½®æ›æˆç©ºå­—ä¸²'')

- é™åˆ¶å­—æ•¸
  => ä½¿ç”¨ html `<input type="text">` çš„ `maxlength` å»é™åˆ¶å­—æ•¸
  ä¸è¦ç”¨ `type="number"` ä¸ç„¶æ²’è¾¦æ³•ç²¾æº–æ§åˆ¶è¼¸å…¥çš„å­—æ•¸...

- éŒ¯èª¤æç¤º: é”åˆ°ç‰¹å®šæ¢ä»¶è¦æç¤ºéŒ¯èª¤ï¼Œå¦‚. å¿…é ˆå¤§æ–¼ 0ã€èµ·è¨–æ—¥æœ‰èª¤
  => ç”¨ (input) å’Œ (change) å»ç¶äº‹ä»¶åˆ¤æ–·ä¸ç¬¦åˆæ¢ä»¶æ™‚ formControl è¦ setErrors() ä¸¦åŠ å…¥ html æç¤º
  å¯ä»¥å°‡äº‹ä»¶æ–¹æ³•å’ŒéŒ¯èª¤ dom æŠ½å‡ºä¾†å¯«æˆ directive

#### éŒ¯èª¤é¡Œç¤º directive demo

[âš¡stackblitz å°‡éŒ¯èª¤é¡Œç¤ºå¯«æˆ directive](https://stackblitz.com/edit/angular-ivy-bsunxe?file=src/app/app.component.html)
